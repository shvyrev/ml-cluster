# System Patterns

Этот файл документирует повторяющиеся шаблоны и стандарты системы.
2025-09-21 07:02:45 - Инициализация системных шаблонов на основе анализа документации проекта.

## Шаблоны кодирования

*   **Java микросервисы:** Используется OpenJDK 17 с JAR-файлами, запускаемыми через `java -jar app.jar`.
*   **Скрипты Bash:** Широкое использование скриптов Bash (`.sh`) для автоматизации задач управления кластером и сервисами.

## Архитектурные шаблоны

*   **Kubernetes-нативный подход:** Развертывание всех компонентов (PostgreSQL, MinIO, Keycloak, ModelMesh Serving, Java микросервисы) как ресурсов Kubernetes.
*   **Использование k3d:** Легковесный Kubernetes кластер для локальной разработки и тестирования.
*   **Разделение по Namespace:** Использование отдельных пространств имен (`model-registry`, `services`) для логического разделения компонентов.
*   **Ingress для внешнего доступа:** Использование Traefik как Ingress контроллера для маршрутизации внешнего трафика к внутренним сервисам.
*   **Централизованная аутентификация/авторизация:** Keycloak как единая точка для управления идентификацией и доступом.
*   **Объектное хранилище:** MinIO для хранения данных, совместимого с S3 API.
*   **Реестр контейнеров:** Локальный Docker Registry для управления образами контейнеров.
*   **Автоматизация развертывания:** Использование скриптов для автоматического развертывания и управления жизненным циклом кластера и сервисов.

## Шаблоны тестирования

*   **Проверка статуса:** Использование `kubectl get pods/svc/ingress` и `./cluster.sh status` для проверки состояния развернутых компонентов.
*   **Просмотр логов:** Централизованный доступ к логам через `kubectl logs` и `./cluster.sh services logs`.
*   **Отладка сети:** Использование `nslookup` и `nc` внутри подов для диагностики сетевых проблем.
*   **Port-forwarding:** Использование `kubectl port-forward` или `./cluster.sh port-forward` для локального доступа к сервисам.
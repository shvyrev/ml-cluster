# Decision Log

Этот файл записывает архитектурные решения и их обоснование.
2025-09-21 07:02:30 - Инициализация журнала решений на основе анализа документации проекта.

## Решение

*   **Выбор дистрибутива Kubernetes:** k3d для локального кластера ML-платформы.

## Обоснование

*   k3d выбран для легковесного и быстрого развертывания локального кластера Kubernetes, что идеально подходит для разработки и тестирования ML-платформы.

## Детали реализации

*   Кластер `ml-cluster` развертывается с 2 серверами и 2 агентами.

---

## Решение

*   **Выбор реестра контейнеров:** Локальный Docker Registry.

## Обоснование

*   Использование локального реестра (`k3d-ml-registry:5050`) обеспечивает быструю и изолированную среду для сборки и развертывания образов контейнеров без зависимости от внешних репозиториев.

## Детали реализации

*   Реестр настроен на `localhost:5050` и зеркалируется на `http://k3d-ml-registry:5000`.

---

## Решение

*   **Выбор базы данных:** PostgreSQL.

## Обоснование

*   PostgreSQL является надежной, масштабируемой и многофункциональной реляционной базой данных, подходящей для хранения данных Keycloak и других сервисов платформы.

## Детали реализации

*   Развертывается как Kubernetes ресурс в пространстве имен `model-registry`.

---

## Решение

*   **Выбор объектного хранилища:** MinIO.

## Обоснование

*   MinIO предоставляет S3-совместимое объектное хранилище, которое легко интегрируется с приложениями, использующими API S3, и может быть развернуто локально в кластере.

## Детали реализации

*   Развертывается как Kubernetes ресурс в пространстве имен `model-registry`.

---

## Решение

*   **Выбор системы аутентификации и авторизации:** Keycloak.

## Обоснование

*   Keycloak является мощным и гибким решением для управления идентификацией и доступом (IAM), поддерживающим OpenID Connect и OAuth 2.0, что критично для обеспечения безопасности микросервисов.

## Детали реализации

*   Настроен с Realm `model-registry-realm`, Client `model-registry-app` и тестовым пользователем `alice`. Развертывается как Kubernetes ресурс в пространстве имен `model-registry`.

---

## Решение

*   **Выбор платформы для обслуживания ML-моделей:** ModelMesh Serving.

## Обоснование

*   ModelMesh Serving предназначен для эффективного развертывания и масштабирования ML-моделей в Kubernetes, обеспечивая высокую производительность и управляемость.

## Детали реализации

*   Интегрируется через Ingress с путем `/v2` к сервису `model-registry` на порту `8008`.

---

## Решение

*   **Выбор Ingress контроллера:** Traefik.

## Обоснование

*   Traefik является современным HTTP-реверс-прокси и балансировщиком нагрузки, который легко интегрируется с Kubernetes и автоматически обнаруживает сервисы.

## Детали реализации

*   Настроен для обработки входящего трафика, включая Java микросервисы и ModelMesh Serving.

---

## Решение

*   **Архитектура микросервисов:** Java микросервисы.

## Обоснование

*   Java является зрелой и широко используемой платформой для корпоративных приложений, что обеспечивает надежность и производительность для бэкенд-сервисов ML-платформы.

## Детали реализации

*   Три Java микросервиса развертываются через Ingress в пространстве имен `services`.